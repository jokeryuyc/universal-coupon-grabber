# 🧪 Universal Coupon Grabber 逐步测试指南

## 📋 测试前准备

### 1. 重新加载插件
- [ ] 打开 `chrome://extensions/`
- [ ] 找到 Universal Coupon Grabber
- [ ] 点击刷新按钮 🔄
- [ ] 确认状态为"已启用"

### 2. 检查插件状态
- [ ] 浏览器工具栏出现插件图标
- [ ] 点击图标能打开弹窗
- [ ] 弹窗显示正常（不是空白页面）

## 🔧 第一步：基础功能测试

### 测试1.1：插件界面
```
操作步骤：
1. 点击插件图标
2. 观察弹窗界面

预期结果：
✅ 弹窗正常打开
✅ 显示"Universal Coupon Grabber"标题
✅ 状态显示为"就绪"
✅ 有"开始捕获"、"新建任务"等按钮
```

### 测试1.2：Background Service Worker
```
操作步骤：
1. 打开 chrome://extensions/
2. 找到插件，点击"service worker"链接
3. 查看控制台日志

预期结果：
✅ 看到："Universal Coupon Grabber - Background Service Started"
✅ 看到："Settings loaded: {...}"
✅ 无错误信息
```

**如果测试1失败，请告诉我具体的错误信息！**

## 🌐 第二步：网络捕获测试

### 测试2.1：启动网络捕获
```
操作步骤：
1. 访问任意网站（建议先用简单网站如百度）
2. 点击插件图标
3. 点击"开始捕获"按钮

预期结果：
✅ 弹窗不会关闭
✅ 按钮文字变为"停止捕获"
✅ 状态显示为"监听中"
✅ 日志区域显示"开始监听网络请求..."
```

### 测试2.2：停止网络捕获
```
操作步骤：
1. 在监听状态下，点击"停止捕获"按钮

预期结果：
✅ 按钮文字变为"开始捕获"
✅ 状态显示为"就绪"
✅ 日志显示"停止监听网络请求"
```

**如果测试2失败，请截图并告诉我具体现象！**

## ⚙️ 第三步：设置功能测试

### 测试3.1：打开设置页面
```
操作步骤：
1. 点击插件图标
2. 点击底部"设置"按钮

预期结果：
✅ 新标签页打开设置页面
✅ 页面标题为"Universal Coupon Grabber - 设置"
✅ 有多个标签页（常规设置、执行配置等）
```

### 测试3.2：修改和保存设置
```
操作步骤：
1. 在设置页面，切换到"常规设置"标签
2. 修改"最大日志条数"为500
3. 点击"保存设置"按钮

预期结果：
✅ 右上角显示"设置保存成功"提示
✅ 设置值保持修改后的状态
✅ 无错误提示
```

**如果测试3失败，请告诉我是哪个步骤出错！**

## 🎯 第四步：美团网站测试

### 测试4.1：访问美团
```
操作步骤：
1. 新标签页访问：https://i.meituan.com/
2. 按F12打开控制台
3. 查看控制台日志

预期结果：
✅ 控制台显示："Universal Coupon Grabber - Content Script Initialized"
✅ 显示："Current website: i.meituan.com"
✅ 无错误信息
```

### 测试4.2：美团网络监听
```
操作步骤：
1. 在美团页面，点击插件图标
2. 点击"开始捕获"
3. 在美团页面随意点击一些按钮或链接
4. 观察控制台和插件日志

预期结果：
✅ 插件状态为"监听中"
✅ 控制台可能显示网络请求被拦截的信息
✅ 如果点击了抢券相关按钮，可能会有API发现提示
```

## 🛒 第五步：淘宝网站测试

### 测试5.1：访问淘宝
```
操作步骤：
1. 新标签页访问：https://www.taobao.com/
2. 按F12打开控制台
3. 启动插件网络捕获

预期结果：
✅ Content Script正常初始化
✅ 网络捕获正常启动
✅ 无错误信息
```

## 🧪 第六步：快速自动化测试

### 测试6.1：运行快速测试脚本
```
操作步骤：
1. 在任意网站打开控制台（F12）
2. 粘贴并执行以下代码：

const script = document.createElement('script');
script.src = chrome.runtime.getURL('tests/quick-test.js');
document.head.appendChild(script);

预期结果：
✅ 控制台显示测试进度
✅ 最终显示测试报告
✅ 通过率应该在80%以上
```

## 📝 测试结果记录

请按照以下格式记录测试结果：

### 基础功能测试
- 测试1.1 插件界面：[ ] 通过 / [ ] 失败
- 测试1.2 Background Service Worker：[ ] 通过 / [ ] 失败

### 网络捕获测试  
- 测试2.1 启动网络捕获：[ ] 通过 / [ ] 失败
- 测试2.2 停止网络捕获：[ ] 通过 / [ ] 失败

### 设置功能测试
- 测试3.1 打开设置页面：[ ] 通过 / [ ] 失败
- 测试3.2 修改和保存设置：[ ] 通过 / [ ] 失败

### 网站兼容性测试
- 测试4.1 美团访问：[ ] 通过 / [ ] 失败
- 测试4.2 美团网络监听：[ ] 通过 / [ ] 失败
- 测试5.1 淘宝访问：[ ] 通过 / [ ] 失败

### 自动化测试
- 测试6.1 快速测试脚本：[ ] 通过 / [ ] 失败

## 🚨 常见问题和解决方案

### 问题1：插件图标点击无反应
```
可能原因：插件未正确加载
解决方案：
1. 检查chrome://extensions/中插件状态
2. 重新加载插件
3. 重启Chrome浏览器
```

### 问题2：弹窗显示空白
```
可能原因：popup文件路径错误
解决方案：
1. 检查popup/popup.html是否存在
2. 查看background service worker错误日志
3. 重新加载插件
```

### 问题3：网络捕获不工作
```
可能原因：Content Script未注入
解决方案：
1. 刷新目标网站页面
2. 检查控制台是否有Content Script初始化日志
3. 确认网站域名在manifest.json的host_permissions中
```

### 问题4：设置保存失败
```
可能原因：Background通信问题
解决方案：
1. 检查background service worker是否运行
2. 查看详细错误信息
3. 重新加载插件
```

## 📞 测试反馈

请告诉我：

1. **哪些测试通过了？**
2. **哪些测试失败了？**
3. **具体的错误信息是什么？**
4. **控制台有什么错误日志？**
5. **截图（如果有异常界面）**

根据您的测试结果，我会提供针对性的修复方案！

---

**现在开始第一步测试吧！** 🚀
